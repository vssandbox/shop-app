{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/veb/Desktop/ai-dev/shop-app/hooks/useShoppingList.ts"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { Deal, ShoppingListItem } from \"@/types\";\n\nconst STORAGE_KEY = \"shopping-list\";\n\nexport function useShoppingList() {\n  const [items, setItems] = useState<ShoppingListItem[]>([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  // Load from localStorage on mount (with migration for old data format)\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEY);\n      if (stored) {\n        const parsed = JSON.parse(stored);\n        // Migrate old items that have 'price' instead of 'basePrice'\n        const migrated = parsed.map((item: ShoppingListItem & { price?: number }) => ({\n          ...item,\n          basePrice: item.basePrice ?? item.price ?? 0,\n          unit: item.unit ?? \"each\",\n          quantity: item.quantity ?? 1,\n        }));\n        setItems(migrated);\n      }\n    } catch (error) {\n      console.error(\"Failed to load shopping list:\", error);\n    }\n    setIsLoaded(true);\n  }, []);\n\n  // Save to localStorage when items change\n  useEffect(() => {\n    if (isLoaded) {\n      try {\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(items));\n      } catch (error) {\n        console.error(\"Failed to save shopping list:\", error);\n      }\n    }\n  }, [items, isLoaded]);\n\n  const addItem = useCallback((deal: Deal) => {\n    setItems((prev) => {\n      // Prevent duplicates\n      if (prev.some((item) => item.id === deal.id)) {\n        return prev;\n      }\n      const initialQuantity = deal.unit === \"lb\" ? 1 : 1;\n      const newItem: ShoppingListItem = {\n        ...deal,\n        quantity: initialQuantity,\n        addedAt: Date.now(),\n      };\n      return [...prev, newItem];\n    });\n  }, []);\n\n  const removeItem = useCallback((id: string) => {\n    setItems((prev) => prev.filter((item) => item.id !== id));\n  }, []);\n\n  const updateQuantity = useCallback((id: string, newQuantity: number) => {\n    if (newQuantity <= 0) {\n      setItems((prev) => prev.filter((item) => item.id !== id));\n    } else {\n      setItems((prev) =>\n        prev.map((item) =>\n          item.id === id ? { ...item, quantity: newQuantity } : item\n        )\n      );\n    }\n  }, []);\n\n  const itemIds = new Set(items.map((item) => item.id));\n\n  const cartTotal = items.reduce(\n    (sum, item) => sum + item.basePrice * item.quantity,\n    0\n  );\n\n  const itemCount = items.reduce((sum, item) => sum + item.quantity, 0);\n\n  return {\n    items,\n    itemIds,\n    isLoaded,\n    addItem,\n    removeItem,\n    updateQuantity,\n    cartTotal,\n    itemCount,\n  };\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAKA,MAAM,cAAc;AAEb,SAAS;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAqB,EAAE;IACzD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,uEAAuE;IACvE,IAAA,kNAAS,EAAC;QACR,IAAI;YACF,MAAM,SAAS,aAAa,OAAO,CAAC;YACpC,IAAI,QAAQ;gBACV,MAAM,SAAS,KAAK,KAAK,CAAC;gBAC1B,6DAA6D;gBAC7D,MAAM,WAAW,OAAO,GAAG,CAAC,CAAC,OAAgD,CAAC;wBAC5E,GAAG,IAAI;wBACP,WAAW,KAAK,SAAS,IAAI,KAAK,KAAK,IAAI;wBAC3C,MAAM,KAAK,IAAI,IAAI;wBACnB,UAAU,KAAK,QAAQ,IAAI;oBAC7B,CAAC;gBACD,SAAS;YACX;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;QACjD;QACA,YAAY;IACd,GAAG,EAAE;IAEL,yCAAyC;IACzC,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU;YACZ,IAAI;gBACF,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;YACnD,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,iCAAiC;YACjD;QACF;IACF,GAAG;QAAC;QAAO;KAAS;IAEpB,MAAM,UAAU,IAAA,oNAAW,EAAC,CAAC;QAC3B,SAAS,CAAC;YACR,qBAAqB;YACrB,IAAI,KAAK,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK,KAAK,EAAE,GAAG;gBAC5C,OAAO;YACT;YACA,MAAM,kBAAkB,KAAK,IAAI,KAAK,OAAO,IAAI;YACjD,MAAM,UAA4B;gBAChC,GAAG,IAAI;gBACP,UAAU;gBACV,SAAS,KAAK,GAAG;YACnB;YACA,OAAO;mBAAI;gBAAM;aAAQ;QAC3B;IACF,GAAG,EAAE;IAEL,MAAM,aAAa,IAAA,oNAAW,EAAC,CAAC;QAC9B,SAAS,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;IACvD,GAAG,EAAE;IAEL,MAAM,iBAAiB,IAAA,oNAAW,EAAC,CAAC,IAAY;QAC9C,IAAI,eAAe,GAAG;YACpB,SAAS,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;QACvD,OAAO;YACL,SAAS,CAAC,OACR,KAAK,GAAG,CAAC,CAAC,OACR,KAAK,EAAE,KAAK,KAAK;wBAAE,GAAG,IAAI;wBAAE,UAAU;oBAAY,IAAI;QAG5D;IACF,GAAG,EAAE;IAEL,MAAM,UAAU,IAAI,IAAI,MAAM,GAAG,CAAC,CAAC,OAAS,KAAK,EAAE;IAEnD,MAAM,YAAY,MAAM,MAAM,CAC5B,CAAC,KAAK,OAAS,MAAM,KAAK,SAAS,GAAG,KAAK,QAAQ,EACnD;IAGF,MAAM,YAAY,MAAM,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;IAEnE,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///Users/veb/Desktop/ai-dev/shop-app/components/ShoppingListProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useContext, ReactNode } from \"react\";\nimport { useShoppingList } from \"@/hooks/useShoppingList\";\nimport { Deal, ShoppingListItem } from \"@/types\";\n\ninterface ShoppingListContextType {\n  items: ShoppingListItem[];\n  itemIds: Set<string>;\n  isLoaded: boolean;\n  addItem: (deal: Deal) => void;\n  removeItem: (id: string) => void;\n  updateQuantity: (id: string, newQuantity: number) => void;\n  cartTotal: number;\n  itemCount: number;\n}\n\nconst ShoppingListContext = createContext<ShoppingListContextType | null>(null);\n\nexport function ShoppingListProvider({ children }: { children: ReactNode }) {\n  const shoppingList = useShoppingList();\n\n  return (\n    <ShoppingListContext.Provider value={shoppingList}>\n      {children}\n    </ShoppingListContext.Provider>\n  );\n}\n\nexport function useShoppingListContext() {\n  const context = useContext(ShoppingListContext);\n  if (!context) {\n    throw new Error(\n      \"useShoppingListContext must be used within a ShoppingListProvider\"\n    );\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAiBA,MAAM,oCAAsB,IAAA,sNAAa,EAAiC;AAEnE,SAAS,qBAAqB,EAAE,QAAQ,EAA2B;IACxE,MAAM,eAAe,IAAA,2IAAe;IAEpC,qBACE,8OAAC,oBAAoB,QAAQ;QAAC,OAAO;kBAClC;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MACR;IAEJ;IACA,OAAO;AACT"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///Users/veb/Desktop/ai-dev/shop-app/components/TabNavigation.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\n\ninterface TabNavigationProps {\n  listCount: number;\n}\n\nexport default function TabNavigation({ listCount }: TabNavigationProps) {\n  const pathname = usePathname();\n\n  const tabs = [\n    { href: \"/\", label: \"Deals\", icon: \"üè∑Ô∏è\" },\n    { href: \"/list\", label: \"List\", icon: \"üõí\" },\n  ];\n\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 safe-area-inset-bottom\">\n      <div className=\"flex\">\n        {tabs.map((tab) => {\n          const isActive = pathname === tab.href;\n          return (\n            <Link\n              key={tab.href}\n              href={tab.href}\n              className={`flex-1 flex flex-col items-center py-3 relative ${\n                isActive ? \"text-blue-500\" : \"text-gray-500\"\n              }`}\n            >\n              <span className=\"text-xl\">{tab.icon}</span>\n              <span className=\"text-xs mt-1\">{tab.label}</span>\n              {tab.href === \"/list\" && listCount > 0 && (\n                <span className=\"absolute top-2 right-1/4 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\n                  {listCount > 9 ? \"9+\" : listCount}\n                </span>\n              )}\n            </Link>\n          );\n        })}\n      </div>\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AASe,SAAS,cAAc,EAAE,SAAS,EAAsB;IACrE,MAAM,WAAW,IAAA,iJAAW;IAE5B,MAAM,OAAO;QACX;YAAE,MAAM;YAAK,OAAO;YAAS,MAAM;QAAM;QACzC;YAAE,MAAM;YAAS,OAAO;YAAQ,MAAM;QAAK;KAC5C;IAED,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACZ,KAAK,GAAG,CAAC,CAAC;gBACT,MAAM,WAAW,aAAa,IAAI,IAAI;gBACtC,qBACE,8OAAC,uKAAI;oBAEH,MAAM,IAAI,IAAI;oBACd,WAAW,CAAC,gDAAgD,EAC1D,WAAW,kBAAkB,iBAC7B;;sCAEF,8OAAC;4BAAK,WAAU;sCAAW,IAAI,IAAI;;;;;;sCACnC,8OAAC;4BAAK,WAAU;sCAAgB,IAAI,KAAK;;;;;;wBACxC,IAAI,IAAI,KAAK,WAAW,YAAY,mBACnC,8OAAC;4BAAK,WAAU;sCACb,YAAY,IAAI,OAAO;;;;;;;mBAVvB,IAAI,IAAI;;;;;YAenB;;;;;;;;;;;AAIR"}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["file:///Users/veb/Desktop/ai-dev/shop-app/components/TabNavigationClient.tsx"],"sourcesContent":["\"use client\";\n\nimport { useShoppingListContext } from \"./ShoppingListProvider\";\nimport TabNavigation from \"./TabNavigation\";\n\nexport default function TabNavigationClient() {\n  const { itemCount } = useShoppingListContext();\n  return <TabNavigation listCount={itemCount} />;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,6JAAsB;IAC5C,qBAAO,8OAAC,uIAAa;QAAC,WAAW;;;;;;AACnC"}}]
}